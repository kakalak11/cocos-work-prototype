{"version":3,"sources":["spaceboy.js"],"names":["cc","Class","extends","Component","properties","_animating","_move","direction","node","scaleX","action","sequence","callFunc","animation","setAnimation","moveBy","runAction","_jump","setCompleteListener","_onKeyDown","event","log","keyCode","macro","KEY","space","stopAction","a","d","w","onCollisionEnter","other","self","_collision","tag","spawn","onCollisionStay","onCollisionExit","console","onLoad","getComponent","manager","director","getCollisionManager","enabled","enabledDebugDraw","systemEvent","on","SystemEvent","EventType","KEY_DOWN","start","update","dt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY;AADJ,KAHP;;AAOL;;AAEAC,WAAO,eAAUC,SAAV,EAAqB;AAAA;;AACxB,aAAKA,SAAL,GAAiBA,SAAjB;AACA,aAAKA,SAAL,GAAiB,CAAjB,GAAqB,KAAKC,IAAL,CAAUC,MAAV,GAAmB,CAAC,GAAzC,GAA+C,KAAKD,IAAL,CAAUC,MAAV,GAAmB,GAAlE;AACA,aAAKC,MAAL,GAAcV,GAAGW,QAAH,CACVX,GAAGY,QAAH,CAAY;AAAA,mBAAM,MAAKC,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,KAA/B,EAAsC,IAAtC,CAAN;AAAA,SAAZ,CADU,EAEVd,GAAGe,MAAH,CAAU,CAAV,EAAa,KAAK,KAAKR,SAAvB,EAAkC,CAAlC,CAFU,EAGVP,GAAGY,QAAH,CAAY,YAAM;AACd,kBAAKC,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,MAA/B,EAAuC,IAAvC;AACH,SAFD,CAHU,CAAd;AAOA,aAAKN,IAAL,CAAUQ,SAAV,CAAoB,KAAKN,MAAzB;AACH,KApBI;;AAsBLO,WAAO,iBAAY;AAAA;;AACf,aAAKJ,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,MAA/B,EAAuC,KAAvC;AACA,aAAKD,SAAL,CAAeK,mBAAf,CAAmC,YAAM;AACrC,mBAAKL,SAAL,CAAeK,mBAAf,CAAmC,YAAM,CAAG,CAA5C;AACA,mBAAKL,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,MAA/B,EAAuC,IAAvC;AACH,SAHD;AAIH,KA5BI;;AA8BLK,gBAAY,oBAAUC,KAAV,EAAiB;AAAA;;AACzBpB,WAAGqB,GAAH,CAAO,UAAP;AACA,gBAAQD,MAAME,OAAd;AACI,iBAAKtB,GAAGuB,KAAH,CAASC,GAAT,CAAaC,KAAlB;AACI,qBAAKjB,IAAL,CAAUkB,UAAV,CAAqB,KAAKhB,MAA1B;AACA,qBAAKG,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,OAA/B,EAAwC,IAAxC;AACA,qBAAKD,SAAL,CAAeK,mBAAf,CAAmC,YAAM;AACrC,2BAAKL,SAAL,CAAeK,mBAAf,CAAmC,YAAM,CAAG,CAA5C;AACA,2BAAKL,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,MAA/B,EAAuC,IAAvC;AACH,iBAHD;AAIA;AACJ,iBAAKd,GAAGuB,KAAH,CAASC,GAAT,CAAaG,CAAlB;AACI,qBAAKrB,KAAL,CAAW,CAAC,CAAZ;AACA;AACJ,iBAAKN,GAAGuB,KAAH,CAASC,GAAT,CAAaI,CAAlB;AACI,qBAAKtB,KAAL,CAAW,CAAX;AACA;AACJ,iBAAKN,GAAGuB,KAAH,CAASC,GAAT,CAAaK,CAAlB;AACI,qBAAKZ,KAAL;AACA;;AAjBR;AAoBH,KApDI;;AAsDLa,sBAAkB,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AAAA;;AACrC,aAAKC,UAAL,GAAkB,IAAlB;AACAjC,WAAGqB,GAAH,CAAO,oBAAP;AACA,YAAIU,MAAMG,GAAN,KAAc,CAAlB,EAAqB;AACjB,iBAAK1B,IAAL,CAAUkB,UAAV,CAAqB,KAAKhB,MAA1B;AACA,iBAAKG,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,OAA/B,EAAwC,IAAxC;AACA,iBAAKD,SAAL,CAAeK,mBAAf,CAAmC,YAAM;AACrC,uBAAKL,SAAL,CAAeK,mBAAf,CAAmC,YAAM,CAAG,CAA5C;AACA,uBAAKL,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,MAA/B,EAAuC,IAAvC;AACH,aAHD;AAIA;AACH;AACD,aAAKN,IAAL,CAAUkB,UAAV,CAAqB,KAAKhB,MAA1B;AACA,aAAKG,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,MAA/B,EAAuC,KAAvC;AACA,aAAKN,IAAL,CAAUQ,SAAV,CAAoBhB,GAAGmC,KAAH,CAASnC,GAAGe,MAAH,CAAU,CAAV,EAAa,MAAM,KAAKR,SAAxB,EAAmC,CAAnC,CAAT,EAAgDP,GAAGY,QAAH,CAAY;AAAA,mBAAM,OAAKJ,IAAL,CAAUC,MAAV,GAAmB,MAAM,OAAKF,SAApC;AAAA,SAAZ,CAAhD,CAApB;AACA,aAAKM,SAAL,CAAeK,mBAAf,CAAmC,YAAM;AACrC,mBAAKL,SAAL,CAAeK,mBAAf,CAAmC,YAAM,CAAG,CAA5C;AACA,mBAAKL,SAAL,CAAeC,YAAf,CAA4B,CAA5B,EAA+B,MAA/B,EAAuC,IAAvC;AACH,SAHD;AAKH,KA1EI;;AA4ELsB,qBAAiB,yBAAUL,KAAV,EAAiBC,IAAjB,EAAuB,CAEvC,CA9EI;;AAgFLK,qBAAiB,yBAAUN,KAAV,EAAiBC,IAAjB,EAAuB;AACpC,aAAKC,UAAL,GAAkB,KAAlB;AACAK,gBAAQjB,GAAR,CAAY,mBAAZ;AACH,KAnFI;;AAqFLkB,UArFK,oBAqFI;AACL,aAAK1B,SAAL,GAAiB,KAAKL,IAAL,CAAUgC,YAAV,CAAuB,aAAvB,CAAjB;AACA,YAAIC,UAAUzC,GAAG0C,QAAH,CAAYC,mBAAZ,EAAd;AACAF,gBAAQG,OAAR,GAAkB,IAAlB;AACAH,gBAAQI,gBAAR,GAA2B,IAA3B;AACA;AACA7C,WAAG8C,WAAH,CAAeC,EAAf,CAAkB/C,GAAGgD,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAK/B,UAA1D,EAAsE,IAAtE;AACH,KA5FI;AA8FLgC,SA9FK,mBA8FG,CAEP,CAhGI;AAkGLC,UAlGK,kBAkGEC,EAlGF,EAkGM;AACP;AACH;AApGI,CAAT","file":"spaceboy.js","sourceRoot":"../../../../../assets/newScene/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _animating: false,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    _move: function (direction) {\n        this.direction = direction;\n        this.direction < 0 ? this.node.scaleX = -0.1 : this.node.scaleX = 0.1;\n        this.action = cc.sequence(\n            cc.callFunc(() => this.animation.setAnimation(0, 'run', true)),\n            cc.moveBy(1, 25 * this.direction, 0),\n            cc.callFunc(() => {\n                this.animation.setAnimation(0, 'idle', true);\n            }),\n        );\n        this.node.runAction(this.action);\n    },\n\n    _jump: function () {\n        this.animation.setAnimation(0, 'jump', false);\n        this.animation.setCompleteListener(() => {\n            this.animation.setCompleteListener(() => { });\n            this.animation.setAnimation(0, 'idle', true);\n        });\n    },\n\n    _onKeyDown: function (event) {\n        cc.log('key down');\n        switch (event.keyCode) {\n            case cc.macro.KEY.space:\n                this.node.stopAction(this.action);\n                this.animation.setAnimation(0, 'shoot', true);\n                this.animation.setCompleteListener(() => {\n                    this.animation.setCompleteListener(() => { });\n                    this.animation.setAnimation(0, 'idle', true);\n                });\n                break;\n            case cc.macro.KEY.a:\n                this._move(-1);\n                break;\n            case cc.macro.KEY.d:\n                this._move(1);\n                break;\n            case cc.macro.KEY.w:\n                this._jump();\n                break;\n\n        }\n    },\n\n    onCollisionEnter: function (other, self) {\n        this._collision = true;\n        cc.log('on collision enter');\n        if (other.tag === 1) {\n            this.node.stopAction(this.action);\n            this.animation.setAnimation(0, 'shoot', true);\n            this.animation.setCompleteListener(() => {\n                this.animation.setCompleteListener(() => { });\n                this.animation.setAnimation(0, 'idle', true);\n            });\n            return;\n        }\n        this.node.stopAction(this.action);\n        this.animation.setAnimation(0, 'jump', false);\n        this.node.runAction(cc.spawn(cc.moveBy(1, 100 * this.direction, 0), cc.callFunc(() => this.node.scaleX = 0.1 * this.direction)));\n        this.animation.setCompleteListener(() => {\n            this.animation.setCompleteListener(() => { });\n            this.animation.setAnimation(0, 'idle', true);\n        });\n\n    },\n\n    onCollisionStay: function (other, self) {\n\n    },\n\n    onCollisionExit: function (other, self) {\n        this._collision = false;\n        console.log('on collision exit');\n    },\n\n    onLoad() {\n        this.animation = this.node.getComponent('sp.Skeleton');\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        manager.enabledDebugDraw = true;\n        // manager.enabledDrawBoundingBox = true;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this._onKeyDown, this);\n    },\n\n    start() {\n\n    },\n\n    update(dt) {\n        // this.node.runAction(cc.moveBy(0.25, 10, 0));\n    },\n});\n"]}